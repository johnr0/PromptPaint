<style type="text/css">
  .column {
    float: left;
    width: 50%;
  }   

  .onefifth {
    float: left;
    width: 20%;
  }   
  
  .row:after {
    content: "";
    display: table;
    clear: both;
  }
  
  .marginTop{
      margin-top:10px;
  }

  .marginLeft{
      margin-left:10px;
  }
  
  .fullWidth{
    max-width: calc(100% - 10px);
  }
  .slider{
      height:10;
      width:300px;
      margin: auto;
      display: block;
  }
  
  .likert ul
  {
      list-style-type: none;
      margin: 0;
      padding: 0;
  }
  
  .likert li
  {
      float: left;
      text-align: left;
      list-style-type: none;
  }

  .solidborder{
    border: solid 2px black;
  }

  .transparentborder{
    border: solid 2px transparent;
  }
  </style>
  <script src="https://assets.crowd.aws/crowd-html-elements.js"></script><crowd-form answer-format="flatten-objects"> <!--Overview Page-->

  <!--Pre Test Instruction Page-->
  
  <div class="instruction" id="page_instruction"><strong>Instruction</strong>
    <p>In this task, for each question, you will be given one computer-generated image. The computer tried to change the image to include other elements with four different approaches.</p>
    <p>For given images, we ask you to rank four changed images according to</p> 
    <p>1) similarity, if the changed image share the visual characteristics with the original image, and</p>
    <p>2) element inclusion, whether the changed image end up including elements of new prompt</p>  
    <p>Once ready, press next to proceed.</p>
  </div>
  <!--Pre Test Page-->

  <!--Intervention Page-->
  
  <div class="intervention" id="page_intervention0" style="display: none">
    <div class="row" style="display:flex">
      <div>
        <p>The far left image in the bottom is generated by a computer with a prompt <strong>"${original_descriptor_0}"</strong>.</p>
        <p>With four different approaches, the computer tried to change the image to include elements of <strong>"${added_descriptor_0}"</strong> into the image.</p>
        <p>Please rank these images according to</p>
        <p>1) Similarity, if the changed image share the visual characteristics with the original image, and</p>
        <p>2) Element inclusion, whether the changed image end up including elements of the new prompt, here, <strong>"${added_descriptor_0}"</strong>.</p>
      </div>
      
    </div>
  
    <div class="row">
      <p>Input 1 to 4 in the box to rank each item</p>
    </div>

    <div class="row marginTop">
      <div class="onefifth">
        Original image
      </div>
      <div class="onefifth">
        Option 1
      </div>
      <div class="onefifth">
        Option 2
      </div>
      <div class="onefifth">
        Option 3
      </div>
      <div class="onefifth">
        Option 4
      </div>
    </div>

    <div class="row marginTop">
      <div class="onefifth">
        <img class='fullWidth solidborder' src="${original_link_0}"/>
      </div>
      <div class="onefifth">
        <img class='fullWidth transparentborder' src="${added_link0_0}"/>
      </div>
      <div class="onefifth">
        <img class='fullWidth transparentborder' src="${added_link1_0}"/>
      </div>
      <div class="onefifth">
        <img class='fullWidth transparentborder' src="${added_link2_0}"/>
      </div>
      <div class="onefifth">
        <img class='fullWidth transparentborder' src="${added_link3_0}"/>
      </div>
    </div>

  

    <div class="row">
      <div class="onefifth">
        <p>1. Similarity</p> 
        <p>(1 for most similar and 4 for least similar)</p>
      </div>
      <div class="onefifth">
        <p>
          <input required name="sim0_0" type="number" min="1" max="4"/>
        </p>
      </div>
      <div class="onefifth">
        <p>
          <input required name="sim0_1" type="number" min="1" max="4"/>
        </p>
      </div>
      <div class="onefifth">
        <p>
          <input required name="sim0_2" type="number" min="1" max="4"/>
        </p>
      </div>
      <div class="onefifth">
        <p>
          <input required name="sim0_3" type="number" min="1" max="4"/>
        </p>
      </div>
    </div>
    <hr/>

    <div class="row">
      <div class="onefifth">
        <p>2. Element inclusion (<strong>"${added_descriptor_0}"</strong>)</p> 
        <p>(1 for having the element most and 4 for having the element least)</p>
      </div>
      <div class="onefifth">
        <p>
          <input required name="inc0_0" type="number" min="1" max="4"/>
        </p>
      </div>
      <div class="onefifth">
        <p>
          <input required name="inc0_1" type="number" min="1" max="4"/>
        </p>
      </div>
      <div class="onefifth">
        <p>
          <input required name="inc0_2" type="number" min="1" max="4"/>
        </p>
      </div>
      <div class="onefifth">
        <p>
          <input required name="inc0_3" type="number" min="1" max="4"/>
        </p>
      </div>
    </div>
    
  </div>
  

  
  
  <p>
    <input id="prev" style="display: none" type="button" value="prev" /> 
    <input id="next" type="button" value="next" /> 
    <input id="confirm" style="display: none" type="button" value="confirm" /> 
    <input disabled="disabled" id="submitButton" style="display: none" type="submit" value="Submit" />
  </p>
  <script language='Javascript'>
          var page_num = 0;
          var page_id_list = [
          "page_instruction", 
          "page_intervention0", "page_intervention1",
          "page_intervention2", "page_intervention3", 
          "page_intervention4", "page_intervention5",
          "page_intervention6", "page_intervention7", 
          "page_intervention8", "page_intervention9", 
          "page_intervention10", "page_intervention11", 
          "page_intervention12", "page_intervention13", 
          "page_intervention14", "page_intervention15", 
          "page_intervention16", "page_intervention17",
          "page_intervention18", "page_intervention19",]
          var max_page_num = page_id_list.length;
          
          document.getElementById('next').onclick=function(){
              console.log(page_id_list[page_num]);
              // When the page is overview.
              if (page_id_list[page_num].includes('instruction')){
                  document.getElementById('prev').style.display = ""
                  document.getElementById(page_id_list[page_num+1]).style.display = ""
                  document.getElementById(page_id_list[page_num]).style.display = "none"
                  page_num ++;
              }
              
              // When the page is instruction
              else if (page_id_list[page_num].includes('intervention'))
              {
                var intv_id = page_id_list[page_num].substring(17, page_id_list[page_num].length);
                if (checkLikertDone(intv_id)) {
                    if (page_id_list[page_num].includes('19'))
                    {
                        document.getElementById('submitButton').style.display = "";
                        document.getElementById('next').style.display = "none";
                        document.getElementById('prev').style.display = "";
                    }
                    else
                    {
                        document.getElementById('next').style.display = "";
                        document.getElementById('prev').style.display = "";
                    }
                    document.getElementById(page_id_list[page_num+1]).style.display = ""
                    document.getElementById(page_id_list[page_num]).style.display = "none"
                    page_num ++;
                }else
                  {
                      alert("Please fill answer of the confidence and frustration!");
                  }
              }
            
          }
          
          
          
          document.getElementById('prev').onclick=function(){
              document.getElementById('next').style.display = "";
              if(page_num==1){
                document.getElementById('prev').style.display = "none";
              }
              
              document.getElementById(page_id_list[page_num]).style.display = "none"
              document.getElementById(page_id_list[page_num-1]).style.display = ""
              page_num --;
          }
          
          document.getElementById('submitButton').onclick=function(){
              if (checkLikerDone()) {
                  // Submit
              }
              else {
                  alert("Please select your answers.");
              }
          }
          
          

          for (var i_q=0; i_q<20; i_q++){
            for(var i_i=0; i_i<4; i_i++){
              if(document.getElementsByName('sim'+i_q.toString()+'_'+i_i.toString()).length>0){
                document.getElementsByName('sim'+i_q.toString()+'_'+i_i.toString())[0].onchange = function(){
                  console.log(this, this.value)
                  if(this.value!='' && (this.value>4 || this.value<1)){
                    alert("The value should be between 1 and 4.")
                    this.value = ''
                  }
                  for(var i_i2=0; i_i2<4; i_i2++){
                    if(i_i2.toString()==this.name[this.name.length-1]){
                      continue
                    }
                    var other_value = document.getElementsByName(this.name.substring(0,this.name.length-1)+i_i2.toString())[0].value
                    console.log(other_value, this.value, i_i2, i_i)
                    // console.log(other, this.name.substring(0,this.name.length-1)+i_i2.toString())
                    if(other_value==this.value && this.value!=''){
                      alert("Rank values should be unique for each question.")
                      this.value=''
                    }
                  }
                }
              }
              

              if(document.getElementsByName('inc'+i_q.toString()+'_'+i_i.toString()).length>0){
                document.getElementsByName('inc'+i_q.toString()+'_'+i_i.toString())[0].onchange = function(){
                  console.log(this, this.value)
                  if(this.value!='' && (this.value>4 || this.value<1)){
                    alert("The value should be between 1 and 4.")
                    this.value = ''
                  }
                  for(var i_i2=0; i_i2<4; i_i2++){
                    if(i_i2.toString()==this.name[this.name.length-1]){
                      continue
                    }
                    var other_value = document.getElementsByName(this.name.substring(0,this.name.length-1)+i_i2.toString())[0].value
                    console.log(other_value, this.value, i_i2, i_i)
                    // console.log(other, this.name.substring(0,this.name.length-1)+i_i2.toString())
                    if(other_value==this.value && this.value!=''){
                      alert("Rank values should be unique for each question.")
                      this.value=''
                    }
                  }
                }
              }


              
            }
          }
          
          function checkInterventionDone(id){
              return true
              var getSelectedValue = document.querySelector('input[name="intv'+id+'"]:checked');
              if (getSelectedValue != null){
                  return true;
              }
              return false;
          }
  
          function checkLikertDone(id){
              var simValue = document.querySelector('input[name="sim'+id+'"]:checked');
              var conValue = document.querySelector('input[name="con'+id+'"]:checked');
              if (simValue == null || conValue == null){
                  return false;
              }
              return true;        
          }

          document.getElementById('page_intervention19').onclick=function(){
              if(checkLikertDone(19)){
                  document.getElementById('submitButton').disabled=false
              }else{
                  document.getElementById('submitButton').disabled=true
              }
          }
          
          
      </script> </crowd-form>